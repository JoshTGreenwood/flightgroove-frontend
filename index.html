<html>

  <head>
    <title>Embedding Elm in HTML!</title>
    <script type="text/javascript" src="index.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="assets/styles/main.css" rel="stylesheet">
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.22.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.22.1/mapbox-gl.css' rel='stylesheet' />
  </head>

  <body>
    <div id="main"></div>

    <script>

      function setupMap(mapId) {
        console.log("setting up");
        mapboxgl.accessToken = 'pk.eyJ1IjoiY2lhcmFucGhpbGxpcHMiLCJhIjoiY2lyemZkaXRhMDAwZTJ6bHc2emRiOXVjeSJ9.1sxXM4f1RtI5JgGy2_M-Fg';
        var map = new mapboxgl.Map({
            container: mapId,
            style: 'mapbox://styles/ciaranphillips/cirzff94i0065gym6r4s5z1u2',
            zoom: 3,
            center: [4.899, 52.372]
        });

        var success  = (typeof map !== 'undefined');
        return success;
      }

      var app = Elm.Main.fullscreen();

      app.ports.map.subscribe(function(mapId) {
          var mapSuccess = setupMap(mapId);
          app.ports.mapCallback.send(mapSuccess);
      });


    </script>
  </body>

  <script type="text/javascript">

  /*  Elm.Main.fullscreen(); */
  </script>

</html>
